export default class t extends HTMLElement{connectedCallback(){this.svg(this.attachShadow({mode:`open`}))}svg(t,e=(this.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e55,#3ee`).split`,`,i=~~this.getAttribute`pull`,s=~~this.getAttribute`gap`,r=0,l=0){setTimeout((n=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;this.slice=[...t.querySelectorAll`slice`].map(((t,n)=>{let u=t.getAttribute`size`,o=~~u.replace(`%`,``),h=~~t.getAttribute`stroke-width`||~~this.getAttribute`stroke-width`||500+i/2-i,a=r,g=(s,r=h,n=o,u=t.getAttribute(`stroke`)||0==s&&e.shift(),p=(500+i/2)/2-i/2+s-(`stroke-width`==this.getAttribute`fill`?(500-i/2-r)/2:0),b=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(b.setAttribute(`stroke`,u),b.setAttribute(`stroke-width`,r),b.setAttribute(`pathLength`,l),b.setAttribute(`stroke-dasharray`,n+` `+(l-n)),b.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-p}a2 2 0 000 ${2*p}a2 2 0 000-${2*p}`),b.setAttribute(`fill`,`none`),b.width=r,b.point=(t=0,e)=>e?g(e).point(t):b.getPointAtLength(b.getTotalLength()-b.getTotalLength()/l*(t+(a+n/2))),b);o==u?l||[...this.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`+s)):l=~~this.getAttribute`size`||100;o||(o=l-r,u=o+`%`);let p=g(0),b=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),A=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);b.path=p;b.create=g;b.onmouseout=t=>(this.g=b,this.dispatchEvent(new Event(`slice`)));b.onmouseover=t=>(this.g=b,this.dispatchEvent(new Event(`slice`)));b.setAttribute(`size`,u);b.setAttribute(`slice`,n+1);b.setAttribute(`label`,A.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,u)||u:``);p.setAttribute(`stroke-dashoffset`,r+=o+s);[...t.attributes].map((t=>p.setAttribute(t.name,t.value)));A.setAttribute(`y`,p.point(0,~~this.getAttribute`text`||80).y+~~t.getAttribute`y`);A.setAttribute(`x`,p.point(0,~~this.getAttribute`text`||80).x+~~t.getAttribute`x`);b.append(p,A);t.parentNode.replaceChild(b,t);b.pull=(e,s=Math.abs(~~t.getAttribute`pull`||i))=>b.setAttribute(`transform`,(b.pulled=e)?`translate(${p.point(0,s).x-p.point().x} ${p.point(0,s).y-p.point().y})`:``);b.pull(t.hasAttribute`pull`);return b}))}))}}