export default class t extends HTMLElement{connectedCallback(){this.svg(this.attachShadow({mode:`open`}))}svg(t,e=(this.getAttribute`stroke`||`#3ee,#e55,#ee3,#35e,#3e3,#e33`).split`,`,i=~~this.getAttribute`pull`,s=~~this.getAttribute`gap`,r=0,l=0){setTimeout((n=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;this.slice=[...t.querySelectorAll`slice`].map(((t,n)=>{let u=t.getAttribute`size`,o=~~u.replace(`%`,``),a=~~t.getAttribute`stroke-width`||~~this.getAttribute`stroke-width`||500+i/2-i,h=r,g=(s,r=a,n=o,u=t.getAttribute(`stroke`)||0==s&&e.pop(),g=(500+i/2)/2-i/2+s-(`stroke-width`==this.getAttribute`fill`?(500-i/2-r)/2:0),p=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(p.setAttribute(`stroke`,u),p.setAttribute(`stroke-width`,r),p.setAttribute(`pathLength`,l),p.setAttribute(`stroke-dasharray`,n+` `+(l-n)),p.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-g}a2 2 0 000 ${2*g}a2 2 0 000-${2*g}`),p.setAttribute(`fill`,`none`),p.point=(t=h+n/2,e)=>p.getPointAtLength(p.getTotalLength()-p.getTotalLength()/l*t),p);o==u?l||[...this.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`+s)):l=~~this.getAttribute`size`||100;o||(o=l-r,u=o+`%`);let p=g(0),b=g(~~this.getAttribute`text`||60).point(),A=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),c=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);A.path=p;A.create=g;A.onmouseout=t=>(this.g=A,this.dispatchEvent(new Event(`slice`)));A.onmouseover=t=>(this.g=A,this.dispatchEvent(new Event(`slice`)));A.setAttribute(`size`,u);A.setAttribute(`slice`,n+1);A.setAttribute(`label`,c.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,u)||u:``);p.setAttribute(`stroke-dashoffset`,r+=o+s);[...t.attributes].map((t=>p.setAttribute(t.name,t.value)));c.setAttribute(`y`,b.y+~~t.getAttribute`y`);c.setAttribute(`x`,b.x+~~t.getAttribute`x`);A.append(p,c);t.parentNode.replaceChild(A,t);A.pull=(e,s=Math.abs(~~t.getAttribute`pull`||i),r=g(s+1).point())=>A.setAttribute(`transform`,(A.pulled=e)?`translate(${r.x-p.point().x} ${r.y-p.point().y})`:``);A.pull(t.hasAttribute`pull`);return A}))}))}}