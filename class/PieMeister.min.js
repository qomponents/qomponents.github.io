export default class t extends HTMLElement{connectedCallback(){this.svg(this.attachShadow({mode:`open`}))}svg(t,e=`getAttribute`,s=(this[e]`stroke`||`#e24,#2a4,#fe2,#46e,#f62,#4ee`).split`,`,i=~~this[e]`pull`,l=~~this[e]`gap`,r=0,n=`http://www.w3.org/2000/svg`,a=0){setTimeout((o=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg ${this.id} xmlns=${n} viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;this.slice=[...t.querySelectorAll`slice`].map(((t,o)=>{let h=t[e]`size`,u=~~h.replace(`%`,``),p=~~t[e]`stroke-width`||~~this[e]`stroke-width`||500+i/2-i,c=r,d=(l,r=p,o=u,h=t[e](`stroke`)||0==l&&s.shift``,d=(500+i/2)/2-i/2+l-(`stroke-width`==this[e]`fill`?(500-i/2-r)/2:0),b=document.createElementNS(n,`path`))=>(b.setAttribute(`stroke`,h),b.setAttribute(`stroke-width`,r),b.setAttribute(`pathLength`,a),b.setAttribute(`stroke-dasharray`,o+` `+(a-o)),b.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-d}a2 2 0 000 ${2*d}a2 2 0 000-${2*d}`),b.setAttribute(`fill`,`none`),b.point=t=>b.getPointAtLength(b.getTotalLength``-b.getTotalLength``/a*(c+o/2)),b);u==h?a||[...this.querySelectorAll`slice`].map((t=>a+=~~t[e]`size`+l)):a=~~this[e]`size`||100;u||(u=a-r,h=u+`%`);let b=d(0),g=d(~~this[e]`text`||60).point``,m=document.createElementNS(n,`g`),A=document.createElementNS(n,`text`);m.path=b;m.create=d;m.onmouseout=t=>(this.g=m,this.dispatchEvent(new Event(`slice`)));m.onmouseover=t=>(this.g=m,this.dispatchEvent(new Event(`slice`)));m.setAttribute(`size`,h);m.setAttribute(`slice`,o+1);m.setAttribute(`label`,A.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,h)||h:``);b.setAttribute(`stroke-dashoffset`,r+=u+l);[...t.attributes].map((t=>b.setAttribute(t.name,t.value)));A.setAttribute(`y`,g.y+~~t[e]`y`);A.setAttribute(`x`,g.x+~~t[e]`x`);m.append(b,A);t.parentNode.replaceChild(m,t);m.pull=(s,l=Math.abs(~~t[e]`pull`||i),r=d(l+1).point``)=>m.setAttribute(`transform`,(m.pulled=s)?`translate(${r.x-b.point``.x} ${r.y-b.point``.y})`:``);m.pull(t.hasAttribute`pull`);return m}))}))}}