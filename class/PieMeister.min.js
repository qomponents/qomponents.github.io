export default class t extends HTMLElement{connectedCallback(){this.svg(this.attachShadow({mode:`open`}))}svg(t,e=(this.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e55,#3ee`).split`,`,i=~~this.getAttribute`pull`,s=~~this.getAttribute`gap`,r=0,l=0){setTimeout((u=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;this.slice=[...t.querySelectorAll`slice`].map(((t,u)=>{let n=t.getAttribute`size`,o=~~n.replace(`%`,``),h=~~t.getAttribute`stroke-width`||~~this.getAttribute`stroke-width`||500+i/2-i,a=r,p=(s,r=h,u=o,n=t.getAttribute(`stroke`)||0==s&&e.shift(),g=(500+i/2)/2-i/2+s-(`stroke-width`==this.getAttribute`fill`?(500-i/2-r)/2:0),b=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(b.setAttribute(`stroke`,n),b.setAttribute(`stroke-width`,r),b.setAttribute(`pathLength`,l),b.setAttribute(`stroke-dasharray`,u+` `+(l-u)),b.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-g}a2 2 0 000 ${2*g}a2 2 0 000-${2*g}`),b.setAttribute(`fill`,`none`),b.width=r,b.point=(t=0,e)=>e?p(e).point(t):b.getPointAtLength(b.getTotalLength()-b.getTotalLength()/l*(t+(a+u/2))),b);o==n?l||[...this.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`+s)):l=~~this.getAttribute`size`||100;o||(o=l-r,n=o+`%`);let g=p(0),b=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),A=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);b.path=g;b.create=p;b.onmouseout=t=>(this.g=b,this.dispatchEvent(new Event(`slice`),b.pull(0)));b.onmouseover=t=>(this.g=b,this.dispatchEvent(new Event(`slice`),b.pull(1)));b.setAttribute(`size`,n);b.setAttribute(`slice`,u+1);b.setAttribute(`label`,A.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,n)||n:``);g.setAttribute(`stroke-dashoffset`,r+=o+s);[...t.attributes].map((t=>g.setAttribute(t.name,t.value)));A.setAttribute(`y`,g.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).y);A.setAttribute(`x`,g.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).x);b.append(g,A);t.parentNode.replaceChild(b,t);b.pull=(e=t.hasAttribute`pull`,s=Math.abs(~~t.getAttribute`pull`||i))=>b.setAttribute(`transform`,(b.pulled=e)?`translate(${g.point(0,s).x-g.point().x} ${g.point(0,s).y-g.point().y})`:``);b.pull();return b}))}))}}